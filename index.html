<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>March Madness - Bracket Submission</title>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Holtwood+One+SC|Kaushan+Script|Abel|Roboto+Condensed:700' rel='stylesheet'>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="hero">
        <div class="hero-wrap">
            <p class="intro">Interactive</p>
            <h1>March Madness</h1>
            <p class="year"><i class="fa fa-star"></i> Bracket Challenge <i class="fa fa-star"></i></p>
        </div>
    </header>

    <!-- ADMIN MESSAGE TICKER -->
    <div id="adminTicker" class="admin-ticker" style="display:none;">
        <div class="ticker-wrap">
            <div class="ticker-content" id="tickerContent">
                <span class="ticker-item">Loading announcements...</span>
            </div>
        </div>
    </div>

    <nav><a href="index.html">Submit Bracket</a> | <a href="leaderboard.html">Leaderboard</a> | <a href="rules.html">Rules & Payments</a> | <a href="admin.html" class="subtle">Admin</a></nav>

    <section id="user-form">
        <input type="text" id="name" placeholder="Your First and Last Name" required>
        <input type="email" id="email" placeholder="Your Email" required>
        <input type="number" id="tiebreaker" placeholder="Championship Tiebreaker Score" required>
        <button id="submitBtn">Submit Bracket</button>
        <p id="error" class="error"></p>
        <div id="confirmation" class="alert" style="display:none; color:green;">Bracket submitted! View your locked bracket below.</div>
    </section>

    <section id="bracket">
        <div class="bracket-wrapper">
            <div class="round round-1 left" id="round-1-left"><h3>1st ROUND</h3></div>
            <div class="round round-2 left" id="round-2-left"><h3>2nd ROUND</h3></div>
            <div class="round round-3 left" id="round-3-left"><h3>SWEET 16</h3></div>
            <div class="round round-4 left" id="round-4-left"><h3>ELITE EIGHT</h3></div>
            <div class="round round-5 left" id="round-5-left"><h3>FINAL FOUR</h3></div>
            <div class="round round-6 left" id="round-6-left"><h3>CHAMPIONSHIP</h3></div>
            <div class="round round-7 center" id="champion"><h3>CHAMPION</h3></div>
            <div class="round round-6 right" id="round-6-right"><h3>CHAMPIONSHIP</h3></div>
            <div class="round round-5 right" id="round-5-right"><h3>FINAL FOUR</h3></div>
            <div class="round round-4 right" id="round-4-right"><h3>ELITE EIGHT</h3></div>
            <div class="round round-3 right" id="round-3-right"><h3>SWEET 16</h3></div>
            <div class="round round-2 right" id="round-2-right"><h3>2nd ROUND</h3></div>
            <div class="round round-1 right" id="round-1-right"><h3>1st ROUND</h3></div>
        </div>
    </section>

    <footer class="site-footer">
        <div class="footer-content">
            <p><i class="fa fa-envelope"></i> Contact: <a href="mailto:ncaahoopsmadness@gmail.com">ncaahoopsmadness@gmail.com</a></p>
            <p style="margin-top: 10px; font-size: 0.9em; opacity: 0.8;">&copy; 2025 March Madness Bracket Challenge. All rights reserved.</p>
        </div>
    </footer>

    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyB27qEP0k2PR8Zz_z_A8KjGcXvxX9OROQA",
            authDomain: "marchmadness2025-24f04.firebaseapp.com",
            projectId: "marchmadness2025-24f04",
            storageBucket: "marchmadness2025-24f04.firebasestorage.app",
            messagingSenderId: "916205408985",
            appId: "1:916205408985:web:1dd57fc8704c6c0e8fe4c8",
            measurementId: "G-TKTZB2FFRB"
        };
        firebase.initializeApp(firebaseConfig);
        
        // Load admin ticker messages AFTER Firebase is initialized
        const tickerDb = firebase.firestore();
        tickerDb.collection('adminMessages').doc('ticker').onSnapshot(doc => {
            try {
                const tickerContent = document.getElementById('tickerContent');
                const adminTicker = document.getElementById('adminTicker');
                
                if (doc.exists && doc.data().enabled) {
                    const data = doc.data();
                    const messages = data.messages || [];
                    
                    if (messages.length > 0) {
                        let tickerHTML = '';
                        messages.forEach(msg => {
                            tickerHTML += `<span class="ticker-item">${msg}</span>`;
                        });
                        tickerContent.innerHTML = tickerHTML + tickerHTML;
                        adminTicker.style.display = 'block';
                    } else {
                        adminTicker.style.display = 'none';
                    }
                } else {
                    adminTicker.style.display = 'none';
                }
            } catch (err) {
                console.log('Ticker not configured:', err);
            }
        });
    </script>
    <script src="script.js"></script>
</body>
</html>

